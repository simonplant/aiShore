{
  "sprintId": "sprint-1769650483",
  "startedAt": "2026-01-28T18:34:43-07:00",
  "status": "completed",
  "item": {
    "id": "FEAT-006",
    "title": "Configurable agent permissions per command",
    "sourceBacklog": "backlog.json",
    "steps": [
      "Step 1: Define default permission constants near the top of the file (after line ~72): PERMS_DEVELOPER='Bash(git:*),Edit,Write,Read,Glob,Grep', PERMS_VALIDATOR='Bash(git:*),Read,Glob,Grep', PERMS_REVIEWER='Read,Glob,Grep', PERMS_REVIEWER_DOCS='Read,Glob,Grep,Edit,Write'.",
      "Step 2: In run_agent() (line ~529), add a new parameter or derive permissions from agent_name and mode. Map: developer/implement→PERMS_DEVELOPER, validator/validate→PERMS_VALIDATOR, architect/review→PERMS_REVIEWER. For review with output_file (--update-docs), use PERMS_REVIEWER_DOCS.",
      "Step 3: Replace the hardcoded 'Bash(git:*),Edit,Write,Read,Glob,Grep' in run_agent() (lines ~560, ~565) with the derived permission variable.",
      "Step 4: Add optional 'permissions' section to config.yaml loading in load_config(). Format: permissions.developer, permissions.validator, permissions.reviewer. If set, override the defaults. Use same yq/grep pattern as existing config loading.",
      "Step 5: Update cmd_help() to document the default permission sets and the config.yaml override option."
    ],
    "acceptanceCriteria": [
      "Validator agent cannot write or edit files by default",
      "Review agent is read-only by default, gets write access with --update-docs",
      "Developer agent retains full permissions",
      "Users can override permissions in config.yaml",
      "Default behavior is unchanged for users without config overrides",
      "Groom agents (tech-lead, product-owner) retain full permissions since they update backlog files",
      "shellcheck passes with no new warnings"
    ],
    "startedAt": "2026-01-28T18:34:43-07:00",
    "status": "passed",
    "completedAt": "2026-01-28T18:38:47-07:00"
  },
  "completedAt": "2026-01-28T18:38:47-07:00"
}
